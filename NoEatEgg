-- LocalScript en StarterPlayer → StarterPlayerScripts

local Players = game:GetService("Players")
local player  = Players.LocalPlayer

local BLOCKED_TOOL_NAME = "Protein Egg"

-- Desactiva todo el código interno del tool
local function neutralizeTool(tool)
    -- 1) Deshabilitar o destruir cualquier Script/LocalScript en su interior
    for _, desc in ipairs(tool:GetDescendants()) do
        if desc:IsA("Script") or desc:IsA("LocalScript") then
            -- Si no quieres destruirlos, simplemente los deshabilitas:
            if desc:IsA("LocalScript") then
                desc.Disabled = true
            else
                desc:Destroy()
            end
        end
        -- 2) Si hay RemoteEvents, anulamos su FireServer
        if desc:IsA("RemoteEvent") then
            pcall(function()
                desc.FireServer = function() end
            end)
        end
    end
end

-- Cuando equipas una herramienta
local function onToolEquipped(tool)
    if tool.Name == BLOCKED_TOOL_NAME then
        neutralizeTool(tool)
    end
end

-- Monitorea un contenedor (Backpack o Character)
local function monitorContainer(container)
    -- Neutraliza las que ya estén allí
    for _, tool in ipairs(container:GetChildren()) do
        if tool:IsA("Tool") and tool.Name == BLOCKED_TOOL_NAME then
            neutralizeTool(tool)
        end
    end
    -- Y las que lleguen en el futuro
    container.ChildAdded:Connect(function(child)
        if child:IsA("Tool") and child.Name == BLOCKED_TOOL_NAME then
            -- Espera un breve tick para que carguen scripts internos
            task.defer(function()
                neutralizeTool(child)
            end)
            -- Conecta al Equipped para repetir por si el juego vuelve a reactivar algo
            child.Equipped:Connect(onToolEquipped)
        end
    end)
end

-- Arrancamos al cargar el personaje
player.CharacterAdded:Connect(function(char)
    monitorContainer(player.Backpack)
    monitorContainer(char)
end)
if player.Character then
    monitorContainer(player.Backpack)
    monitorContainer(player.Character)
end
